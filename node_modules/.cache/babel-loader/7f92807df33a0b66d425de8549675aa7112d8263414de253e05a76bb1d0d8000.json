{"ast":null,"code":"import { __assign } from \"tslib\";\n// Utilities\nimport * as React from 'react';\nimport { classNamesFunction, elementContains, focusFirstChild, getDocument, KeyCodes, getRTL, EventGroup, getPropsWithDefaults } from '../../Utilities';\nimport { RectangleEdge, getOppositeEdge } from '../../Positioning';\n// Component Dependencies\nimport { PositioningContainer } from './PositioningContainer/index';\nimport { Beak, BEAK_HEIGHT, BEAK_WIDTH } from './Beak/Beak';\nimport { DirectionalHint } from '../../common/DirectionalHint';\n// Coachmark\nimport { COACHMARK_HEIGHT, COACHMARK_WIDTH } from './Coachmark.styles';\nimport { FocusTrapZone } from '../../FocusTrapZone';\nimport { useAsync, useOnEvent, useSetTimeout, useWarnings } from '@fluentui/react-hooks';\nimport { useDocumentEx, useWindowEx } from '../../utilities/dom';\nvar getClassNames = classNamesFunction();\nexport var COACHMARK_ATTRIBUTE_NAME = 'data-coachmarkid';\nvar DEFAULT_PROPS = {\n  isCollapsed: true,\n  mouseProximityOffset: 10,\n  delayBeforeMouseOpen: 3600,\n  delayBeforeCoachmarkAnimation: 0,\n  isPositionForced: true,\n  positioningContainerProps: {\n    directionalHint: DirectionalHint.bottomAutoEdge\n  }\n};\nfunction useCollapsedState(props, entityInnerHostElementRef) {\n  var propsIsCollapsed = props.isCollapsed,\n    onAnimationOpenStart = props.onAnimationOpenStart,\n    onAnimationOpenEnd = props.onAnimationOpenEnd;\n  /** Is the Coachmark currently collapsed into a tear drop shape */\n  var _a = React.useState(!!propsIsCollapsed),\n    isCollapsed = _a[0],\n    setIsCollapsed = _a[1];\n  var setTimeout = useSetTimeout().setTimeout;\n  // Rather than pushing out logic elsewhere to prevent openCoachmark from being called repeatedly,\n  // we'll track it here and only invoke the logic once. We do this with a ref, rather than just the state,\n  // because the openCoachmark callback can be captured in scope for an effect\n  var hasCoachmarkBeenOpened = React.useRef(!isCollapsed);\n  var openCoachmark = React.useCallback(function () {\n    var _a, _b;\n    if (!hasCoachmarkBeenOpened.current) {\n      setIsCollapsed(false);\n      onAnimationOpenStart === null || onAnimationOpenStart === void 0 ? void 0 : onAnimationOpenStart();\n      (_b = (_a = entityInnerHostElementRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'transitionend', function () {\n        // Need setTimeout to trigger narrator\n        setTimeout(function () {\n          if (entityInnerHostElementRef.current) {\n            focusFirstChild(entityInnerHostElementRef.current);\n          }\n        }, 1000);\n        onAnimationOpenEnd === null || onAnimationOpenEnd === void 0 ? void 0 : onAnimationOpenEnd();\n      });\n      hasCoachmarkBeenOpened.current = true;\n    }\n  }, [entityInnerHostElementRef, onAnimationOpenEnd, onAnimationOpenStart, setTimeout]);\n  React.useEffect(function () {\n    if (!propsIsCollapsed) {\n      openCoachmark();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run if isCollapsed changes\n  }, [propsIsCollapsed]);\n  return [isCollapsed, openCoachmark];\n}\nfunction usePositionedData() {\n  var async = useAsync();\n  /**\n   * Alignment edge of callout in relation to target\n   */\n  var _a = React.useState(),\n    targetAlignment = _a[0],\n    setTargetAlignment = _a[1];\n  /**\n   * Position of Coachmark/TeachingBubble in relation to target\n   */\n  var _b = React.useState(),\n    targetPosition = _b[0],\n    setTargetPosition = _b[1];\n  var onPositioned = function (_a) {\n    var alignmentEdge = _a.alignmentEdge,\n      targetEdge = _a.targetEdge;\n    return async.requestAnimationFrame(function () {\n      setTargetAlignment(alignmentEdge);\n      setTargetPosition(targetEdge);\n    });\n  };\n  return [targetAlignment, targetPosition, onPositioned];\n}\nfunction useBeakPosition(props, targetAlignment, targetPosition) {\n  var isRTL = getRTL(props.theme);\n  return React.useMemo(function () {\n    var beakDirection = targetPosition === undefined ? RectangleEdge.bottom : getOppositeEdge(targetPosition);\n    var beakPosition = {\n      direction: beakDirection\n    };\n    var transformOriginX;\n    var transformOriginY;\n    var distanceAdjustment = '3px'; // Adjustment distance for Beak to shift towards Coachmark bubble.\n    switch (beakDirection) {\n      // If Beak is pointing Up or Down\n      case RectangleEdge.top:\n      case RectangleEdge.bottom:\n        // If there is no target alignment, then beak is X-axis centered in callout\n        if (!targetAlignment) {\n          beakPosition.left = \"calc(50% - \".concat(BEAK_WIDTH / 2, \"px)\");\n          transformOriginX = 'center';\n        } else {\n          // Beak is aligned to the left of target\n          if (targetAlignment === RectangleEdge.left) {\n            beakPosition.left = \"\".concat(COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2, \"px\");\n            transformOriginX = 'left';\n          } else {\n            // Beak is aligned to the right of target\n            beakPosition.right = \"\".concat(COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2, \"px\");\n            transformOriginX = 'right';\n          }\n        }\n        if (beakDirection === RectangleEdge.top) {\n          beakPosition.top = distanceAdjustment;\n          transformOriginY = 'top';\n        } else {\n          beakPosition.bottom = distanceAdjustment;\n          transformOriginY = 'bottom';\n        }\n        break;\n      // If Beak is pointing Left or Right\n      case RectangleEdge.left:\n      case RectangleEdge.right:\n        // If there is no target alignment, then beak is Y-axis centered in callout\n        if (!targetAlignment) {\n          beakPosition.top = \"calc(50% - \".concat(BEAK_WIDTH / 2, \"px)\");\n          transformOriginY = \"center\";\n        } else {\n          // Beak is aligned to the top of target\n          if (targetAlignment === RectangleEdge.top) {\n            beakPosition.top = \"\".concat(COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2, \"px\");\n            transformOriginY = \"top\";\n          } else {\n            // Beak is aligned to the bottom of target\n            beakPosition.bottom = \"\".concat(COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2, \"px\");\n            transformOriginY = \"bottom\";\n          }\n        }\n        if (beakDirection === RectangleEdge.left) {\n          if (isRTL) {\n            beakPosition.right = distanceAdjustment;\n          } else {\n            beakPosition.left = distanceAdjustment;\n          }\n          transformOriginX = 'left';\n        } else {\n          if (isRTL) {\n            beakPosition.left = distanceAdjustment;\n          } else {\n            beakPosition.right = distanceAdjustment;\n          }\n          transformOriginX = 'right';\n        }\n        break;\n    }\n    return [beakPosition, \"\".concat(transformOriginX, \" \").concat(transformOriginY)];\n  }, [targetAlignment, targetPosition, isRTL]);\n}\nfunction useListeners(props, translateAnimationContainer, openCoachmark) {\n  var _a;\n  var document = (_a = getDocument()) === null || _a === void 0 ? void 0 : _a.documentElement;\n  useOnEvent(document, 'keydown', function (e) {\n    var _a, _b;\n    // Open coachmark if user presses ALT + C (arbitrary keypress for now)\n    if (\n    // eslint-disable-next-line deprecation/deprecation\n    e.altKey && e.which === KeyCodes.c ||\n    // eslint-disable-next-line deprecation/deprecation\n    e.which === KeyCodes.enter && ((_b = (_a = translateAnimationContainer.current) === null || _a === void 0 ? void 0 : _a.contains) === null || _b === void 0 ? void 0 : _b.call(_a, e.target))) {\n      openCoachmark();\n    }\n  }, true);\n  var dismissOnLostFocus = function (ev) {\n    var _a;\n    if (props.preventDismissOnLostFocus) {\n      var clickTarget = ev.target;\n      var clickedOutsideCallout = translateAnimationContainer.current && !elementContains(translateAnimationContainer.current, clickTarget);\n      var target = props.target;\n      if (clickedOutsideCallout && clickTarget !== target && !elementContains(target, clickTarget)) {\n        (_a = props.onDismiss) === null || _a === void 0 ? void 0 : _a.call(props, ev);\n      }\n    }\n  };\n  useOnEvent(document, 'click', dismissOnLostFocus, true);\n  useOnEvent(document, 'focus', dismissOnLostFocus, true);\n}\nfunction useProximityHandlers(props, translateAnimationContainer, openCoachmark, setBounds) {\n  var _a = useSetTimeout(),\n    setTimeout = _a.setTimeout,\n    clearTimeout = _a.clearTimeout;\n  /** The target element the mouse would be in proximity to */\n  var targetElementRect = React.useRef();\n  var win = useWindowEx();\n  var doc = useDocumentEx();\n  React.useEffect(function () {\n    var setTargetElementRect = function () {\n      if (translateAnimationContainer.current) {\n        targetElementRect.current = translateAnimationContainer.current.getBoundingClientRect();\n      }\n    };\n    var events = new EventGroup({});\n    // We don't want the user to immediately trigger the Coachmark when it's opened\n    setTimeout(function () {\n      var _a = props.mouseProximityOffset,\n        mouseProximityOffset = _a === void 0 ? 0 : _a;\n      /** Cached ids returned when setTimeout runs during the window resize event trigger. */\n      var timeoutIds = [];\n      // Take the initial measure out of the initial render to prevent an unnecessary render.\n      setTimeout(function () {\n        setTargetElementRect();\n        // When the window resizes we want to async get the bounding client rectangle.\n        // Every time the event is triggered we want to setTimeout and then clear any previous\n        // instances of setTimeout.\n        events.on(win, 'resize', function () {\n          timeoutIds.forEach(function (value) {\n            clearTimeout(value);\n          });\n          timeoutIds.splice(0, timeoutIds.length); // clear array\n          timeoutIds.push(setTimeout(function () {\n            setTargetElementRect();\n            setBounds(getBounds(props.isPositionForced, props.positioningContainerProps, win));\n          }, 100));\n        });\n      }, 10);\n      // Every time the document's mouse move is triggered, we want to check if inside of an element\n      // and set the state with the result.\n      events.on(doc, 'mousemove', function (e) {\n        var _a;\n        var mouseY = e.clientY;\n        var mouseX = e.clientX;\n        setTargetElementRect();\n        if (isInsideElement(targetElementRect.current, mouseX, mouseY, mouseProximityOffset)) {\n          openCoachmark();\n        }\n        (_a = props.onMouseMove) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      });\n    }, props.delayBeforeMouseOpen);\n    return function () {\n      return events.dispose();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n}\nfunction useComponentRef(props) {\n  var onDismiss = props.onDismiss;\n  React.useImperativeHandle(props.componentRef, function (ev) {\n    return {\n      dismiss: function () {\n        onDismiss === null || onDismiss === void 0 ? void 0 : onDismiss(ev);\n      }\n    };\n  }, [onDismiss]);\n}\nfunction useAriaAlert(_a) {\n  var ariaAlertText = _a.ariaAlertText;\n  var async = useAsync();\n  /** ARIA alert text to read aloud with Narrator once the Coachmark is mounted */\n  var _b = React.useState(),\n    alertText = _b[0],\n    setAlertText = _b[1];\n  React.useEffect(function () {\n    // Need to add RAF to have narrator read change in alert container\n    async.requestAnimationFrame(function () {\n      setAlertText(ariaAlertText);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n  return alertText;\n}\nfunction useAutoFocus(_a) {\n  var preventFocusOnMount = _a.preventFocusOnMount;\n  var setTimeout = useSetTimeout().setTimeout;\n  /**\n   * The cached HTMLElement reference to the Entity Inner Host\n   * element.\n   */\n  var entityHost = React.useRef(null);\n  React.useEffect(function () {\n    if (!preventFocusOnMount) {\n      setTimeout(function () {\n        var _a;\n        return (_a = entityHost.current) === null || _a === void 0 ? void 0 : _a.focus();\n      }, 1000);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n  return entityHost;\n}\nfunction useEntityHostMeasurements(props, entityInnerHostElementRef) {\n  /** Is the teaching bubble currently retrieving the original dimensions of the hosted entity. */\n  var _a = React.useState(!!props.isCollapsed),\n    isMeasuring = _a[0],\n    setIsMeasuring = _a[1];\n  /** Cached width and height of _entityInnerHostElement */\n  var _b = React.useState(props.isCollapsed ? {\n      width: 0,\n      height: 0\n    } : {}),\n    entityInnerHostRect = _b[0],\n    setEntityInnerHostRect = _b[1];\n  var async = useAsync();\n  React.useEffect(function () {\n    async.requestAnimationFrame(function () {\n      if (entityInnerHostElementRef.current) {\n        setEntityInnerHostRect({\n          width: entityInnerHostElementRef.current.offsetWidth,\n          height: entityInnerHostElementRef.current.offsetHeight\n        });\n        setIsMeasuring(false);\n      }\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n  return [isMeasuring, entityInnerHostRect];\n}\nfunction useDeprecationWarning(props) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: COMPONENT_NAME,\n      props: props,\n      deprecations: {\n        teachingBubbleRef: undefined,\n        collapsed: 'isCollapsed',\n        beakWidth: undefined,\n        beakHeight: undefined,\n        width: undefined,\n        height: undefined\n      }\n    });\n  }\n}\nvar COMPONENT_NAME = 'CoachmarkBase';\nexport var CoachmarkBase = React.forwardRef(function (propsWithoutDefaults, forwardedRef) {\n  var props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n  var win = useWindowEx();\n  var entityInnerHostElementRef = React.useRef(null);\n  var translateAnimationContainer = React.useRef(null);\n  var _a = usePositionedData(),\n    targetAlignment = _a[0],\n    targetPosition = _a[1],\n    onPositioned = _a[2];\n  var _b = useCollapsedState(props, entityInnerHostElementRef),\n    isCollapsed = _b[0],\n    openCoachmark = _b[1];\n  var _c = useBeakPosition(props, targetAlignment, targetPosition),\n    beakPositioningProps = _c[0],\n    transformOrigin = _c[1];\n  var _d = useEntityHostMeasurements(props, entityInnerHostElementRef),\n    isMeasuring = _d[0],\n    entityInnerHostRect = _d[1];\n  var _e = React.useState(getBounds(props.isPositionForced, props.positioningContainerProps, win)),\n    bounds = _e[0],\n    setBounds = _e[1];\n  var alertText = useAriaAlert(props);\n  var entityHost = useAutoFocus(props);\n  useListeners(props, translateAnimationContainer, openCoachmark);\n  useComponentRef(props);\n  useProximityHandlers(props, translateAnimationContainer, openCoachmark, setBounds);\n  useDeprecationWarning(props);\n  React.useEffect(function () {\n    setBounds(getBounds(props.isPositionForced, props.positioningContainerProps, win));\n  }, [props.isPositionForced, props.positioningContainerProps, win]);\n  var beaconColorOne = props.beaconColorOne,\n    beaconColorTwo = props.beaconColorTwo,\n    children = props.children,\n    target = props.target,\n    color = props.color,\n    positioningContainerProps = props.positioningContainerProps,\n    ariaDescribedBy = props.ariaDescribedBy,\n    ariaDescribedByText = props.ariaDescribedByText,\n    ariaLabelledBy = props.ariaLabelledBy,\n    ariaLabelledByText = props.ariaLabelledByText,\n    ariaAlertText = props.ariaAlertText,\n    delayBeforeCoachmarkAnimation = props.delayBeforeCoachmarkAnimation,\n    styles = props.styles,\n    theme = props.theme,\n    className = props.className,\n    persistentBeak = props.persistentBeak;\n  // Defaulting the main background before passing it to the styles because it is used for `Beak` too.\n  var defaultColor = color;\n  if (!defaultColor && theme) {\n    defaultColor = theme.semanticColors.primaryButtonBackground;\n  }\n  var classNames = getClassNames(styles, {\n    theme: theme,\n    beaconColorOne: beaconColorOne,\n    beaconColorTwo: beaconColorTwo,\n    className: className,\n    isCollapsed: isCollapsed,\n    isMeasuring: isMeasuring,\n    color: defaultColor,\n    transformOrigin: transformOrigin,\n    entityHostHeight: entityInnerHostRect.height === undefined ? undefined : \"\".concat(entityInnerHostRect.height, \"px\"),\n    entityHostWidth: entityInnerHostRect.width === undefined ? undefined : \"\".concat(entityInnerHostRect.width, \"px\"),\n    width: \"\".concat(COACHMARK_WIDTH, \"px\"),\n    height: \"\".concat(COACHMARK_HEIGHT, \"px\"),\n    delayBeforeCoachmarkAnimation: \"\".concat(delayBeforeCoachmarkAnimation, \"ms\")\n  });\n  var finalHeight = isCollapsed ? COACHMARK_HEIGHT : entityInnerHostRect.height;\n  var onClickCallout = React.useCallback(function () {\n    openCoachmark();\n  }, [openCoachmark]);\n  return React.createElement(PositioningContainer, __assign({\n    target: target,\n    offsetFromTarget: BEAK_HEIGHT,\n    finalHeight: finalHeight,\n    ref: forwardedRef,\n    onPositioned: onPositioned,\n    bounds: bounds\n  }, positioningContainerProps), React.createElement(\"div\", {\n    className: classNames.root\n  }, ariaAlertText && React.createElement(\"div\", {\n    className: classNames.ariaContainer,\n    role: \"alert\",\n    \"aria-hidden\": !isCollapsed\n  }, alertText), React.createElement(\"div\", {\n    className: classNames.pulsingBeacon\n  }), React.createElement(\"div\", {\n    className: classNames.translateAnimationContainer,\n    ref: translateAnimationContainer\n  }, React.createElement(\"div\", {\n    className: classNames.scaleAnimationLayer\n  }, React.createElement(\"div\", {\n    className: classNames.rotateAnimationLayer\n  }, (isCollapsed || persistentBeak) && React.createElement(Beak, __assign({}, beakPositioningProps, {\n    color: defaultColor\n  })), React.createElement(\"div\", {\n    className: classNames.entityHost,\n    ref: entityHost,\n    tabIndex: -1,\n    \"data-is-focusable\": true,\n    role: \"dialog\",\n    \"aria-labelledby\": ariaLabelledBy,\n    \"aria-describedby\": ariaDescribedBy,\n    onClick: onClickCallout\n  }, isCollapsed && [ariaLabelledBy && React.createElement(\"p\", {\n    id: ariaLabelledBy,\n    key: 0,\n    className: classNames.ariaContainer\n  }, ariaLabelledByText), ariaDescribedBy && React.createElement(\"p\", {\n    id: ariaDescribedBy,\n    key: 1,\n    className: classNames.ariaContainer\n  }, ariaDescribedByText)], React.createElement(FocusTrapZone, {\n    isClickableOutsideFocusTrap: true,\n    forceFocusInsideTrap: false\n  }, React.createElement(\"div\", {\n    className: classNames.entityInnerHost,\n    ref: entityInnerHostElementRef\n  }, React.createElement(\"div\", {\n    className: classNames.childrenContainer,\n    \"aria-hidden\": isCollapsed\n  }, children)))))))));\n});\nCoachmarkBase.displayName = COMPONENT_NAME;\nfunction getBounds(isPositionForced, positioningContainerProps, win) {\n  var _a, _b;\n  if (isPositionForced) {\n    // If directionalHint direction is the top or bottom auto edge, then we want to set the left/right bounds\n    // to the window x-axis to have auto positioning work correctly.\n    if (positioningContainerProps && (positioningContainerProps.directionalHint === DirectionalHint.topAutoEdge || positioningContainerProps.directionalHint === DirectionalHint.bottomAutoEdge)) {\n      return {\n        left: 0,\n        top: -Infinity,\n        bottom: Infinity,\n        right: (_a = win === null || win === void 0 ? void 0 : win.innerWidth) !== null && _a !== void 0 ? _a : 0,\n        width: (_b = win === null || win === void 0 ? void 0 : win.innerWidth) !== null && _b !== void 0 ? _b : 0,\n        height: Infinity\n      };\n    } else {\n      return {\n        left: -Infinity,\n        top: -Infinity,\n        bottom: Infinity,\n        right: Infinity,\n        width: Infinity,\n        height: Infinity\n      };\n    }\n  } else {\n    return undefined;\n  }\n}\nfunction isInsideElement(\n// eslint-disable-next-line deprecation/deprecation\ntargetElementRect, mouseX, mouseY, mouseProximityOffset) {\n  if (mouseProximityOffset === void 0) {\n    mouseProximityOffset = 0;\n  }\n  return mouseX > targetElementRect.left - mouseProximityOffset && mouseX < targetElementRect.left + targetElementRect.width + mouseProximityOffset && mouseY > targetElementRect.top - mouseProximityOffset && mouseY < targetElementRect.top + targetElementRect.height + mouseProximityOffset;\n}","map":{"version":3,"names":["React","classNamesFunction","elementContains","focusFirstChild","getDocument","KeyCodes","getRTL","EventGroup","getPropsWithDefaults","RectangleEdge","getOppositeEdge","PositioningContainer","Beak","BEAK_HEIGHT","BEAK_WIDTH","DirectionalHint","COACHMARK_HEIGHT","COACHMARK_WIDTH","FocusTrapZone","useAsync","useOnEvent","useSetTimeout","useWarnings","useDocumentEx","useWindowEx","getClassNames","COACHMARK_ATTRIBUTE_NAME","DEFAULT_PROPS","isCollapsed","mouseProximityOffset","delayBeforeMouseOpen","delayBeforeCoachmarkAnimation","isPositionForced","positioningContainerProps","directionalHint","bottomAutoEdge","useCollapsedState","props","entityInnerHostElementRef","propsIsCollapsed","onAnimationOpenStart","onAnimationOpenEnd","_a","useState","setIsCollapsed","setTimeout","hasCoachmarkBeenOpened","useRef","openCoachmark","useCallback","current","_b","addEventListener","call","useEffect","usePositionedData","async","targetAlignment","setTargetAlignment","targetPosition","setTargetPosition","onPositioned","alignmentEdge","targetEdge","requestAnimationFrame","useBeakPosition","isRTL","theme","useMemo","beakDirection","undefined","bottom","beakPosition","direction","transformOriginX","transformOriginY","distanceAdjustment","top","left","concat","right","useListeners","translateAnimationContainer","document","documentElement","e","altKey","which","c","enter","contains","target","dismissOnLostFocus","ev","preventDismissOnLostFocus","clickTarget","clickedOutsideCallout","onDismiss","useProximityHandlers","setBounds","clearTimeout","targetElementRect","win","doc","setTargetElementRect","getBoundingClientRect","events","timeoutIds","on","forEach","value","splice","length","push","getBounds","mouseY","clientY","mouseX","clientX","isInsideElement","onMouseMove","dispose","useComponentRef","useImperativeHandle","componentRef","dismiss","useAriaAlert","ariaAlertText","alertText","setAlertText","useAutoFocus","preventFocusOnMount","entityHost","focus","useEntityHostMeasurements","isMeasuring","setIsMeasuring","width","height","entityInnerHostRect","setEntityInnerHostRect","offsetWidth","offsetHeight","useDeprecationWarning","process","env","NODE_ENV","name","COMPONENT_NAME","deprecations","teachingBubbleRef","collapsed","beakWidth","beakHeight","CoachmarkBase","forwardRef","propsWithoutDefaults","forwardedRef","_c","beakPositioningProps","transformOrigin","_d","_e","bounds","beaconColorOne","beaconColorTwo","children","color","ariaDescribedBy","ariaDescribedByText","ariaLabelledBy","ariaLabelledByText","styles","className","persistentBeak","defaultColor","semanticColors","primaryButtonBackground","classNames","entityHostHeight","entityHostWidth","finalHeight","onClickCallout","createElement","__assign","offsetFromTarget","ref","root","ariaContainer","role","pulsingBeacon","scaleAnimationLayer","rotateAnimationLayer","tabIndex","onClick","id","key","isClickableOutsideFocusTrap","forceFocusInsideTrap","entityInnerHost","childrenContainer","displayName","topAutoEdge","Infinity","innerWidth"],"sources":["C:\\Users\\sahan\\Documents\\Projects\\indian-cuisine-frontend\\node_modules\\@fluentui\\react\\lib\\components\\src\\components\\Coachmark\\Coachmark.base.tsx"],"sourcesContent":["// Utilities\nimport * as React from 'react';\nimport {\n  classNamesFunction,\n  elementContains,\n  focusFirstChild,\n  getDocument,\n  KeyCodes,\n  getRTL,\n  EventGroup,\n  getPropsWithDefaults,\n} from '../../Utilities';\nimport { RectangleEdge, getOppositeEdge } from '../../Positioning';\n\n// Component Dependencies\nimport { PositioningContainer } from './PositioningContainer/index';\nimport { Beak, BEAK_HEIGHT, BEAK_WIDTH } from './Beak/Beak';\nimport { DirectionalHint } from '../../common/DirectionalHint';\n\n// Coachmark\nimport { COACHMARK_HEIGHT, COACHMARK_WIDTH } from './Coachmark.styles';\nimport { FocusTrapZone } from '../../FocusTrapZone';\nimport { useAsync, useOnEvent, useSetTimeout, useWarnings } from '@fluentui/react-hooks';\nimport type { IRectangle } from '../../Utilities';\nimport type { IPositionedData } from '../../Positioning';\nimport type { IPositioningContainerProps } from './PositioningContainer/PositioningContainer.types';\nimport type { ICoachmarkProps, ICoachmarkStyles, ICoachmarkStyleProps } from './Coachmark.types';\nimport type { IBeakProps } from './Beak/Beak.types';\nimport { useDocumentEx, useWindowEx } from '../../utilities/dom';\n\nconst getClassNames = classNamesFunction<ICoachmarkStyleProps, ICoachmarkStyles>();\n\nexport const COACHMARK_ATTRIBUTE_NAME = 'data-coachmarkid';\n\n/**\n * An interface for the cached dimensions of entity inner host.\n */\nexport interface IEntityRect {\n  width?: number;\n  height?: number;\n}\n\ntype BeakPosition = Pick<IBeakProps, 'left' | 'top' | 'right' | 'bottom' | 'direction'>;\n\nconst DEFAULT_PROPS: Partial<ICoachmarkProps> = {\n  isCollapsed: true,\n  mouseProximityOffset: 10,\n  delayBeforeMouseOpen: 3600, // The approximate time the coachmark shows up\n  delayBeforeCoachmarkAnimation: 0,\n  isPositionForced: true,\n  positioningContainerProps: {\n    directionalHint: DirectionalHint.bottomAutoEdge,\n  },\n};\n\nfunction useCollapsedState(props: ICoachmarkProps, entityInnerHostElementRef: React.RefObject<HTMLDivElement>) {\n  const { isCollapsed: propsIsCollapsed, onAnimationOpenStart, onAnimationOpenEnd } = props;\n\n  /** Is the Coachmark currently collapsed into a tear drop shape */\n  const [isCollapsed, setIsCollapsed] = React.useState<boolean>(!!propsIsCollapsed);\n  const { setTimeout } = useSetTimeout();\n\n  // Rather than pushing out logic elsewhere to prevent openCoachmark from being called repeatedly,\n  // we'll track it here and only invoke the logic once. We do this with a ref, rather than just the state,\n  // because the openCoachmark callback can be captured in scope for an effect\n  const hasCoachmarkBeenOpened = React.useRef(!isCollapsed);\n\n  const openCoachmark = React.useCallback(() => {\n    if (!hasCoachmarkBeenOpened.current) {\n      setIsCollapsed(false);\n\n      onAnimationOpenStart?.();\n\n      entityInnerHostElementRef.current?.addEventListener?.('transitionend', (): void => {\n        // Need setTimeout to trigger narrator\n        setTimeout(() => {\n          if (entityInnerHostElementRef.current) {\n            focusFirstChild(entityInnerHostElementRef.current);\n          }\n        }, 1000);\n\n        onAnimationOpenEnd?.();\n      });\n      hasCoachmarkBeenOpened.current = true;\n    }\n  }, [entityInnerHostElementRef, onAnimationOpenEnd, onAnimationOpenStart, setTimeout]);\n\n  React.useEffect(() => {\n    if (!propsIsCollapsed) {\n      openCoachmark();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run if isCollapsed changes\n  }, [propsIsCollapsed]);\n\n  return [isCollapsed, openCoachmark] as const;\n}\n\nfunction usePositionedData() {\n  const async = useAsync();\n\n  /**\n   * Alignment edge of callout in relation to target\n   */\n  const [targetAlignment, setTargetAlignment] = React.useState<RectangleEdge | undefined>();\n  /**\n   * Position of Coachmark/TeachingBubble in relation to target\n   */\n  const [targetPosition, setTargetPosition] = React.useState<RectangleEdge | undefined>();\n\n  const onPositioned = ({ alignmentEdge, targetEdge }: IPositionedData) =>\n    async.requestAnimationFrame(() => {\n      setTargetAlignment(alignmentEdge);\n      setTargetPosition(targetEdge);\n    });\n\n  return [targetAlignment, targetPosition, onPositioned] as const;\n}\n\nfunction useBeakPosition(\n  props: ICoachmarkProps,\n  targetAlignment: RectangleEdge | undefined,\n  targetPosition: RectangleEdge | undefined,\n) {\n  const isRTL = getRTL(props.theme);\n\n  return React.useMemo(() => {\n    const beakDirection = targetPosition === undefined ? RectangleEdge.bottom : getOppositeEdge(targetPosition);\n\n    const beakPosition: BeakPosition = { direction: beakDirection };\n\n    let transformOriginX: string;\n    let transformOriginY: string;\n\n    const distanceAdjustment = '3px'; // Adjustment distance for Beak to shift towards Coachmark bubble.\n\n    switch (beakDirection) {\n      // If Beak is pointing Up or Down\n      case RectangleEdge.top:\n      case RectangleEdge.bottom:\n        // If there is no target alignment, then beak is X-axis centered in callout\n        if (!targetAlignment) {\n          beakPosition.left = `calc(50% - ${BEAK_WIDTH / 2}px)`;\n          transformOriginX = 'center';\n        } else {\n          // Beak is aligned to the left of target\n          if (targetAlignment === RectangleEdge.left) {\n            beakPosition.left = `${COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2}px`;\n            transformOriginX = 'left';\n          } else {\n            // Beak is aligned to the right of target\n            beakPosition.right = `${COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2}px`;\n            transformOriginX = 'right';\n          }\n        }\n\n        if (beakDirection === RectangleEdge.top) {\n          beakPosition.top = distanceAdjustment;\n          transformOriginY = 'top';\n        } else {\n          beakPosition.bottom = distanceAdjustment;\n          transformOriginY = 'bottom';\n        }\n        break;\n      // If Beak is pointing Left or Right\n      case RectangleEdge.left:\n      case RectangleEdge.right:\n        // If there is no target alignment, then beak is Y-axis centered in callout\n        if (!targetAlignment) {\n          beakPosition.top = `calc(50% - ${BEAK_WIDTH / 2}px)`;\n          transformOriginY = `center`;\n        } else {\n          // Beak is aligned to the top of target\n          if (targetAlignment === RectangleEdge.top) {\n            beakPosition.top = `${COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2}px`;\n            transformOriginY = `top`;\n          } else {\n            // Beak is aligned to the bottom of target\n            beakPosition.bottom = `${COACHMARK_WIDTH / 2 - BEAK_WIDTH / 2}px`;\n            transformOriginY = `bottom`;\n          }\n        }\n\n        if (beakDirection === RectangleEdge.left) {\n          if (isRTL) {\n            beakPosition.right = distanceAdjustment;\n          } else {\n            beakPosition.left = distanceAdjustment;\n          }\n          transformOriginX = 'left';\n        } else {\n          if (isRTL) {\n            beakPosition.left = distanceAdjustment;\n          } else {\n            beakPosition.right = distanceAdjustment;\n          }\n          transformOriginX = 'right';\n        }\n        break;\n    }\n\n    return [beakPosition as Readonly<BeakPosition>, `${transformOriginX} ${transformOriginY}`] as const;\n  }, [targetAlignment, targetPosition, isRTL]);\n}\n\nfunction useListeners(\n  props: ICoachmarkProps,\n  translateAnimationContainer: React.RefObject<HTMLDivElement>,\n  openCoachmark: () => void,\n) {\n  const document = getDocument()?.documentElement;\n\n  useOnEvent(\n    document,\n    'keydown',\n    (e: KeyboardEvent) => {\n      // Open coachmark if user presses ALT + C (arbitrary keypress for now)\n      if (\n        // eslint-disable-next-line deprecation/deprecation\n        (e.altKey && e.which === KeyCodes.c) ||\n        // eslint-disable-next-line deprecation/deprecation\n        (e.which === KeyCodes.enter && translateAnimationContainer.current?.contains?.(e.target as Node))\n      ) {\n        openCoachmark();\n      }\n    },\n    true,\n  );\n\n  const dismissOnLostFocus = (ev: Event) => {\n    if (props.preventDismissOnLostFocus) {\n      const clickTarget = ev.target as HTMLElement;\n      const clickedOutsideCallout =\n        translateAnimationContainer.current && !elementContains(translateAnimationContainer.current, clickTarget);\n\n      const { target } = props;\n\n      if (clickedOutsideCallout && clickTarget !== target && !elementContains(target as HTMLElement, clickTarget)) {\n        props.onDismiss?.(ev);\n      }\n    }\n  };\n\n  useOnEvent(document, 'click', dismissOnLostFocus, true);\n  useOnEvent(document, 'focus', dismissOnLostFocus, true);\n}\n\nfunction useProximityHandlers(\n  props: ICoachmarkProps,\n  translateAnimationContainer: React.RefObject<HTMLDivElement>,\n  openCoachmark: () => void,\n  setBounds: (bounds: IRectangle | undefined) => void,\n) {\n  const { setTimeout, clearTimeout } = useSetTimeout();\n\n  /** The target element the mouse would be in proximity to */\n  const targetElementRect = React.useRef<DOMRect>();\n  const win = useWindowEx();\n  const doc = useDocumentEx();\n\n  React.useEffect(() => {\n    const setTargetElementRect = (): void => {\n      if (translateAnimationContainer.current) {\n        targetElementRect.current = translateAnimationContainer.current.getBoundingClientRect();\n      }\n    };\n\n    const events = new EventGroup({});\n\n    // We don't want the user to immediately trigger the Coachmark when it's opened\n    setTimeout(() => {\n      const { mouseProximityOffset = 0 } = props;\n\n      /** Cached ids returned when setTimeout runs during the window resize event trigger. */\n      const timeoutIds: number[] = [];\n\n      // Take the initial measure out of the initial render to prevent an unnecessary render.\n      setTimeout(() => {\n        setTargetElementRect();\n\n        // When the window resizes we want to async get the bounding client rectangle.\n        // Every time the event is triggered we want to setTimeout and then clear any previous\n        // instances of setTimeout.\n        events.on(win, 'resize', (): void => {\n          timeoutIds.forEach((value: number): void => {\n            clearTimeout(value);\n          });\n          timeoutIds.splice(0, timeoutIds.length); // clear array\n\n          timeoutIds.push(\n            setTimeout((): void => {\n              setTargetElementRect();\n              setBounds(getBounds(props.isPositionForced, props.positioningContainerProps, win));\n            }, 100),\n          );\n        });\n      }, 10);\n\n      // Every time the document's mouse move is triggered, we want to check if inside of an element\n      // and set the state with the result.\n      events.on(doc, 'mousemove', (e: MouseEvent) => {\n        const mouseY = e.clientY;\n        const mouseX = e.clientX;\n        setTargetElementRect();\n\n        if (isInsideElement(targetElementRect.current!, mouseX, mouseY, mouseProximityOffset)) {\n          openCoachmark();\n        }\n\n        props.onMouseMove?.(e);\n      });\n    }, props.delayBeforeMouseOpen!);\n\n    return () => events.dispose();\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n}\n\nfunction useComponentRef(props: ICoachmarkProps) {\n  const { onDismiss } = props;\n  React.useImperativeHandle(\n    props.componentRef,\n    (ev?: Event | React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>) => ({\n      dismiss() {\n        onDismiss?.(ev);\n      },\n    }),\n    [onDismiss],\n  );\n}\n\nfunction useAriaAlert({ ariaAlertText }: ICoachmarkProps) {\n  const async = useAsync();\n\n  /** ARIA alert text to read aloud with Narrator once the Coachmark is mounted */\n  const [alertText, setAlertText] = React.useState<string | undefined>();\n\n  React.useEffect(() => {\n    // Need to add RAF to have narrator read change in alert container\n    async.requestAnimationFrame(() => {\n      setAlertText(ariaAlertText);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n\n  return alertText;\n}\n\nfunction useAutoFocus({ preventFocusOnMount }: ICoachmarkProps) {\n  const { setTimeout } = useSetTimeout();\n\n  /**\n   * The cached HTMLElement reference to the Entity Inner Host\n   * element.\n   */\n  const entityHost = React.useRef<HTMLDivElement | null>(null);\n\n  React.useEffect(() => {\n    if (!preventFocusOnMount) {\n      setTimeout(() => entityHost.current?.focus(), 1000);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n\n  return entityHost;\n}\n\nfunction useEntityHostMeasurements(props: ICoachmarkProps, entityInnerHostElementRef: React.RefObject<HTMLDivElement>) {\n  /** Is the teaching bubble currently retrieving the original dimensions of the hosted entity. */\n  const [isMeasuring, setIsMeasuring] = React.useState<boolean>(!!props.isCollapsed);\n  /** Cached width and height of _entityInnerHostElement */\n  const [entityInnerHostRect, setEntityInnerHostRect] = React.useState<IEntityRect>(\n    props.isCollapsed ? { width: 0, height: 0 } : {},\n  );\n  const async = useAsync();\n\n  React.useEffect(() => {\n    async.requestAnimationFrame(() => {\n      if (entityInnerHostElementRef.current) {\n        setEntityInnerHostRect({\n          width: entityInnerHostElementRef.current.offsetWidth,\n          height: entityInnerHostElementRef.current.offsetHeight,\n        });\n        setIsMeasuring(false);\n      }\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on mount\n  }, []);\n\n  return [isMeasuring, entityInnerHostRect] as const;\n}\n\nfunction useDeprecationWarning(props: ICoachmarkProps) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: COMPONENT_NAME,\n      props,\n      deprecations: {\n        teachingBubbleRef: undefined,\n        collapsed: 'isCollapsed',\n        beakWidth: undefined,\n        beakHeight: undefined,\n        width: undefined,\n        height: undefined,\n      },\n    });\n  }\n}\n\nconst COMPONENT_NAME = 'CoachmarkBase';\n\nexport const CoachmarkBase: React.FunctionComponent<ICoachmarkProps> = React.forwardRef<\n  HTMLDivElement,\n  ICoachmarkProps\n>((propsWithoutDefaults, forwardedRef) => {\n  const props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n\n  const win = useWindowEx();\n  const entityInnerHostElementRef = React.useRef<HTMLDivElement | null>(null);\n  const translateAnimationContainer = React.useRef<HTMLDivElement | null>(null);\n\n  const [targetAlignment, targetPosition, onPositioned] = usePositionedData();\n  const [isCollapsed, openCoachmark] = useCollapsedState(props, entityInnerHostElementRef);\n  const [beakPositioningProps, transformOrigin] = useBeakPosition(props, targetAlignment, targetPosition);\n  const [isMeasuring, entityInnerHostRect] = useEntityHostMeasurements(props, entityInnerHostElementRef);\n  const [bounds, setBounds] = React.useState<IRectangle | undefined>(\n    getBounds(props.isPositionForced, props.positioningContainerProps, win),\n  );\n  const alertText = useAriaAlert(props);\n  const entityHost = useAutoFocus(props);\n\n  useListeners(props, translateAnimationContainer, openCoachmark);\n  useComponentRef(props);\n  useProximityHandlers(props, translateAnimationContainer, openCoachmark, setBounds);\n  useDeprecationWarning(props);\n\n  React.useEffect(() => {\n    setBounds(getBounds(props.isPositionForced, props.positioningContainerProps, win));\n  }, [props.isPositionForced, props.positioningContainerProps, win]);\n\n  const {\n    beaconColorOne,\n    beaconColorTwo,\n    children,\n    target,\n    color,\n    positioningContainerProps,\n    ariaDescribedBy,\n    ariaDescribedByText,\n    ariaLabelledBy,\n    ariaLabelledByText,\n    ariaAlertText,\n    delayBeforeCoachmarkAnimation,\n    styles,\n    theme,\n    className,\n    persistentBeak,\n  } = props;\n\n  // Defaulting the main background before passing it to the styles because it is used for `Beak` too.\n  let defaultColor = color;\n  if (!defaultColor && theme) {\n    defaultColor = theme.semanticColors.primaryButtonBackground;\n  }\n\n  const classNames = getClassNames(styles, {\n    theme,\n    beaconColorOne,\n    beaconColorTwo,\n    className,\n    isCollapsed,\n    isMeasuring,\n    color: defaultColor,\n    transformOrigin,\n    entityHostHeight: entityInnerHostRect.height === undefined ? undefined : `${entityInnerHostRect.height}px`,\n    entityHostWidth: entityInnerHostRect.width === undefined ? undefined : `${entityInnerHostRect.width}px`,\n    width: `${COACHMARK_WIDTH}px`,\n    height: `${COACHMARK_HEIGHT}px`,\n    delayBeforeCoachmarkAnimation: `${delayBeforeCoachmarkAnimation}ms`,\n  });\n\n  const finalHeight: number | undefined = isCollapsed ? COACHMARK_HEIGHT : entityInnerHostRect.height;\n\n  const onClickCallout = React.useCallback(() => {\n    openCoachmark();\n  }, [openCoachmark]);\n\n  return (\n    <PositioningContainer\n      target={target}\n      offsetFromTarget={BEAK_HEIGHT}\n      finalHeight={finalHeight}\n      ref={forwardedRef}\n      onPositioned={onPositioned}\n      bounds={bounds}\n      {...positioningContainerProps}\n    >\n      <div className={classNames.root}>\n        {ariaAlertText && (\n          <div className={classNames.ariaContainer} role=\"alert\" aria-hidden={!isCollapsed}>\n            {alertText}\n          </div>\n        )}\n        <div className={classNames.pulsingBeacon} />\n        <div className={classNames.translateAnimationContainer} ref={translateAnimationContainer}>\n          <div className={classNames.scaleAnimationLayer}>\n            <div className={classNames.rotateAnimationLayer}>\n              {(isCollapsed || persistentBeak) && <Beak {...beakPositioningProps} color={defaultColor} />}\n              <div\n                className={classNames.entityHost}\n                ref={entityHost}\n                tabIndex={-1}\n                data-is-focusable={true}\n                role=\"dialog\"\n                aria-labelledby={ariaLabelledBy}\n                aria-describedby={ariaDescribedBy}\n                onClick={onClickCallout}\n              >\n                {isCollapsed && [\n                  ariaLabelledBy && (\n                    <p id={ariaLabelledBy} key={0} className={classNames.ariaContainer}>\n                      {ariaLabelledByText}\n                    </p>\n                  ),\n                  ariaDescribedBy && (\n                    <p id={ariaDescribedBy} key={1} className={classNames.ariaContainer}>\n                      {ariaDescribedByText}\n                    </p>\n                  ),\n                ]}\n                <FocusTrapZone isClickableOutsideFocusTrap={true} forceFocusInsideTrap={false}>\n                  <div className={classNames.entityInnerHost} ref={entityInnerHostElementRef}>\n                    <div className={classNames.childrenContainer} aria-hidden={isCollapsed}>\n                      {children}\n                    </div>\n                  </div>\n                </FocusTrapZone>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </PositioningContainer>\n  );\n});\nCoachmarkBase.displayName = COMPONENT_NAME;\n\nfunction getBounds(\n  isPositionForced?: boolean,\n  positioningContainerProps?: IPositioningContainerProps,\n  win?: Window,\n): IRectangle | undefined {\n  if (isPositionForced) {\n    // If directionalHint direction is the top or bottom auto edge, then we want to set the left/right bounds\n    // to the window x-axis to have auto positioning work correctly.\n    if (\n      positioningContainerProps &&\n      (positioningContainerProps.directionalHint === DirectionalHint.topAutoEdge ||\n        positioningContainerProps.directionalHint === DirectionalHint.bottomAutoEdge)\n    ) {\n      return {\n        left: 0,\n        top: -Infinity,\n        bottom: Infinity,\n        right: win?.innerWidth ?? 0,\n        width: win?.innerWidth ?? 0,\n        height: Infinity,\n      };\n    } else {\n      return {\n        left: -Infinity,\n        top: -Infinity,\n        bottom: Infinity,\n        right: Infinity,\n        width: Infinity,\n        height: Infinity,\n      };\n    }\n  } else {\n    return undefined;\n  }\n}\n\nfunction isInsideElement(\n  // eslint-disable-next-line deprecation/deprecation\n  targetElementRect: ClientRect,\n  mouseX: number,\n  mouseY: number,\n  mouseProximityOffset: number = 0,\n): boolean {\n  return (\n    mouseX > targetElementRect.left - mouseProximityOffset &&\n    mouseX < targetElementRect.left + targetElementRect.width + mouseProximityOffset &&\n    mouseY > targetElementRect.top - mouseProximityOffset &&\n    mouseY < targetElementRect.top + targetElementRect.height + mouseProximityOffset\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}