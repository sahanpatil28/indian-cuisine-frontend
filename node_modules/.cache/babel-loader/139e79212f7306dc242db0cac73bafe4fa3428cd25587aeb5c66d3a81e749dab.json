{"ast":null,"code":"var _this = this;\nimport { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { initializeComponentRef, classNamesFunction, KeyCodes, getRTLSafeKeyCode, css, getId, EventGroup } from '../../Utilities';\nimport { List } from '../../List';\nimport { SelectionMode, SELECTION_CHANGE } from '../../Selection';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { GroupHeader } from './GroupHeader';\nimport { GroupShowAll } from './GroupShowAll';\nimport { GroupFooter } from './GroupFooter';\nvar flattenItems = function (groups, items, memoItems, getGroupItemLimit) {\n  if (!groups) {\n    return items;\n  }\n  if (memoItems.length < 1) {\n    // Not the exact final size but gets us in the ballpark.\n    // This helps avoid trashing memory when building\n    // the flattened list.\n    memoItems = new Array(items.length);\n  }\n  var index = 0;\n  var stack = [];\n  var j = groups.length - 1;\n  while (j >= 0) {\n    stack.push({\n      group: groups[j],\n      groupIndex: j + 1\n    });\n    j--;\n  }\n  while (stack.length > 0) {\n    // eslint-disable-next-line prefer-const\n    var _a = stack.pop(),\n      group = _a.group,\n      groupIndex = _a.groupIndex;\n    memoItems[index] = {\n      group: group,\n      groupId: getId('GroupedListSection'),\n      type: 'header',\n      groupIndex: groupIndex\n    };\n    index++;\n    while (group.isCollapsed !== true && (group === null || group === void 0 ? void 0 : group.children) && group.children.length > 0) {\n      j = group.children.length - 1;\n      while (j > 0) {\n        stack.push({\n          group: group.children[j],\n          groupIndex: j + 1\n        });\n        j--;\n      }\n      group = group.children[0];\n      memoItems[index] = {\n        group: group,\n        groupId: getId('GroupedListSection'),\n        type: 'header',\n        groupIndex: 1\n      };\n      index++;\n    }\n    if (group.isCollapsed !== true) {\n      var itemIndex = group.startIndex;\n      var renderCount = getGroupItemLimit ? getGroupItemLimit(group) : Infinity;\n      var count = !group.isShowingAll ? group.count : items.length;\n      var itemEnd = itemIndex + Math.min(count, renderCount);\n      while (itemIndex < itemEnd) {\n        memoItems[index] = {\n          group: group,\n          item: items[itemIndex],\n          itemIndex: itemIndex,\n          type: 'item'\n        };\n        itemIndex++;\n        index++;\n      }\n      var isShowAllVisible = !group.children && !group.isCollapsed && !group.isShowingAll && (group.count > renderCount || group.hasMoreData);\n      if (isShowAllVisible) {\n        memoItems[index] = {\n          group: group,\n          type: 'showAll'\n        };\n        index++;\n      }\n    }\n    // Placeholder for a potential footer.\n    // Whether or not a footer is displayed is resolved\n    // by the footer render function so this is just a marker\n    // for where a footer may go.\n    memoItems[index] = {\n      group: group,\n      type: 'footer'\n    };\n    index++;\n  }\n  memoItems.length = index;\n  // console.log('MEMO ITEMS', memoItems);\n  return memoItems;\n};\nvar useIsGroupSelected = function (startIndex, count, selection, eventGroup) {\n  var _a = React.useState(function () {\n      var _a;\n      return (_a = selection === null || selection === void 0 ? void 0 : selection.isRangeSelected(startIndex, count)) !== null && _a !== void 0 ? _a : false;\n    }),\n    isSelected = _a[0],\n    setIsSelected = _a[1];\n  React.useEffect(function () {\n    if (selection && eventGroup) {\n      var changeHandler_1 = function () {\n        var _a;\n        setIsSelected((_a = selection === null || selection === void 0 ? void 0 : selection.isRangeSelected(startIndex, count)) !== null && _a !== void 0 ? _a : false);\n      };\n      eventGroup.on(selection, SELECTION_CHANGE, changeHandler_1);\n      return function () {\n        eventGroup === null || eventGroup === void 0 ? void 0 : eventGroup.off(selection, SELECTION_CHANGE, changeHandler_1);\n      };\n    }\n  }, [startIndex, count, selection, eventGroup]);\n  return isSelected;\n};\nvar computeIsSomeGroupExpanded = function (groups) {\n  return !!(groups && groups.some(function (group) {\n    return group.children ? computeIsSomeGroupExpanded(group.children) : !group.isCollapsed;\n  }));\n};\nvar setGroupsCollapsedState = function (groups, isCollapsed) {\n  if (groups === undefined) {\n    return;\n  }\n  for (var groupIndex = 0; groupIndex < groups.length; groupIndex++) {\n    groups[groupIndex].isCollapsed = isCollapsed;\n  }\n};\nvar isInnerZoneKeystroke = function (ev) {\n  // eslint-disable-next-line deprecation/deprecation\n  return ev.which === getRTLSafeKeyCode(KeyCodes.right);\n};\nvar getClassNames = classNamesFunction();\nvar getKey = function (item, _index) {\n  var _a, _b;\n  switch (item.type) {\n    case 'item':\n      return (_b = (_a = item.item) === null || _a === void 0 ? void 0 : _a.key) !== null && _b !== void 0 ? _b : null;\n    case 'header':\n      return item.group.key;\n    case 'footer':\n      return \"\".concat(item.group.key, \"-footer\");\n    case 'showAll':\n      return \"\".concat(item.group.key, \"-showAll\");\n  }\n  return null;\n};\nvar renderGroupHeader = function (props) {\n  return React.createElement(GroupHeader, __assign({}, props));\n};\nvar renderGroupShowAll = function (props) {\n  return React.createElement(GroupShowAll, __assign({}, props));\n};\nvar renderGroupFooter = function (props) {\n  if (props.group && props.footerText) {\n    return React.createElement(GroupFooter, __assign({}, props));\n  }\n  return null;\n};\nexport var GroupedListV2FC = function (props) {\n  var selection = props.selection,\n    _a = props.selectionMode,\n    selectionMode = _a === void 0 ? SelectionMode.multiple : _a,\n    _b = props.groupProps,\n    groupProps = _b === void 0 ? {} : _b,\n    _c = props.compact,\n    compact = _c === void 0 ? false : _c,\n    _d = props.items,\n    items = _d === void 0 ? [] : _d,\n    groups = props.groups,\n    onGroupExpandStateChanged = props.onGroupExpandStateChanged,\n    listProps = props.listProps,\n    className = props.className,\n    usePageCache = props.usePageCache,\n    onShouldVirtualize = props.onShouldVirtualize,\n    theme = props.theme,\n    _e = props.role,\n    role = _e === void 0 ? 'treegrid' : _e,\n    styles = props.styles,\n    _f = props.focusZoneProps,\n    focusZoneProps = _f === void 0 ? {} : _f,\n    _g = props.rootListProps,\n    rootListProps = _g === void 0 ? {} : _g,\n    onRenderCell = props.onRenderCell,\n    viewport = props.viewport,\n    groupedListRef = props.groupedListRef,\n    groupExpandedVersion = props.groupExpandedVersion,\n    versionFromProps = props.version;\n  var _h = groupProps.onRenderHeader,\n    onRenderHeader = _h === void 0 ? renderGroupHeader : _h,\n    _j = groupProps.onRenderFooter,\n    onRenderFooter = _j === void 0 ? renderGroupFooter : _j,\n    _k = groupProps.onRenderShowAll,\n    onRenderShowAll = _k === void 0 ? renderGroupShowAll : _k;\n  var classNames = getClassNames(styles, {\n    theme: theme,\n    className: className,\n    compact: compact\n  });\n  var events = React.useRef();\n  var flatList = React.useRef([]);\n  var isSomeGroupExpanded = React.useRef(computeIsSomeGroupExpanded(groups));\n  var listRef = React.useRef(null);\n  var _l = React.useState({}),\n    version = _l[0],\n    setVersion = _l[1];\n  var _m = React.useState({}),\n    toggleVersion = _m[0],\n    setToggleVersion = _m[1];\n  // eslint-disable-next-line deprecation/deprecation\n  var _o = focusZoneProps.shouldEnterInnerZone,\n    shouldEnterInnerZone = _o === void 0 ? isInnerZoneKeystroke : _o;\n  var listView = React.useMemo(function () {\n    return flattenItems(groups, items, flatList.current, groupProps === null || groupProps === void 0 ? void 0 : groupProps.getGroupItemLimit);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [groups, groupProps === null || groupProps === void 0 ? void 0 : groupProps.getGroupItemLimit, items, toggleVersion, flatList, groupExpandedVersion]);\n  var getPageSpecification = React.useCallback(function (flattenedIndex) {\n    var pageGroup = listView[flattenedIndex];\n    return {\n      key: pageGroup.type === 'header' ? pageGroup.group.key : undefined\n    };\n  }, [listView]);\n  React.useImperativeHandle(groupedListRef, function () {\n    var indexMap;\n    return {\n      scrollToIndex: function (index, measureItem, scrollToMode) {\n        var _a;\n        indexMap = indexMap !== null && indexMap !== void 0 ? indexMap : listView.reduce(function (map, item, listIndex) {\n          if (item.type === 'item') {\n            map[item.itemIndex] = listIndex;\n          }\n          return map;\n        }, []);\n        var scrollIndex = indexMap[index];\n        var measure = typeof measureItem === 'function' ? function (itemIndex) {\n          var _a;\n          if (((_a = listView[itemIndex]) === null || _a === void 0 ? void 0 : _a.type) === 'item') {\n            return measureItem(listView[itemIndex].itemIndex);\n          }\n          return 0;\n        } : undefined;\n        (_a = listRef.current) === null || _a === void 0 ? void 0 : _a.scrollToIndex(scrollIndex, measure, scrollToMode);\n      },\n      getStartItemIndexInView: function () {\n        var _a;\n        return ((_a = listRef.current) === null || _a === void 0 ? void 0 : _a.getStartItemIndexInView()) || 0;\n      }\n    };\n  }, [listView, listRef]);\n  React.useEffect(function () {\n    if (groupProps === null || groupProps === void 0 ? void 0 : groupProps.isAllGroupsCollapsed) {\n      setGroupsCollapsedState(groups, groupProps.isAllGroupsCollapsed);\n    }\n    events.current = new EventGroup(_this);\n    return function () {\n      var _a;\n      (_a = events.current) === null || _a === void 0 ? void 0 : _a.dispose();\n      events.current = undefined;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  React.useEffect(function () {\n    setVersion({});\n  }, [versionFromProps]);\n  React.useEffect(function () {\n    var newIsSomeGroupExpanded = computeIsSomeGroupExpanded(groups);\n    if (newIsSomeGroupExpanded !== isSomeGroupExpanded.current) {\n      isSomeGroupExpanded.current = newIsSomeGroupExpanded;\n      onGroupExpandStateChanged === null || onGroupExpandStateChanged === void 0 ? void 0 : onGroupExpandStateChanged(newIsSomeGroupExpanded);\n    }\n  }, [groups, toggleVersion, onGroupExpandStateChanged, groupExpandedVersion]);\n  var onToggleCollapse = React.useCallback(function (group) {\n    var _a;\n    var onToggleCollapseFn = (_a = groupProps === null || groupProps === void 0 ? void 0 : groupProps.headerProps) === null || _a === void 0 ? void 0 : _a.onToggleCollapse;\n    if (group) {\n      onToggleCollapseFn === null || onToggleCollapseFn === void 0 ? void 0 : onToggleCollapseFn(group);\n      group.isCollapsed = !group.isCollapsed;\n      setToggleVersion({});\n      setVersion({});\n    }\n  }, [setToggleVersion, groupProps]);\n  var onToggleSelectGroup = function (group) {\n    if (group && selection && selectionMode === SelectionMode.multiple) {\n      selection.toggleRangeSelected(group.startIndex, group.count);\n    }\n  };\n  var onToggleSummarize = function (group) {\n    var _a;\n    var onToggleSummarizeFn = (_a = groupProps === null || groupProps === void 0 ? void 0 : groupProps.showAllProps) === null || _a === void 0 ? void 0 : _a.onToggleSummarize;\n    if (onToggleSummarizeFn) {\n      onToggleSummarizeFn(group);\n    } else {\n      if (group) {\n        group.isShowingAll = !group.isShowingAll;\n      }\n      setVersion({});\n      setToggleVersion({});\n    }\n  };\n  var getDividerProps = function (group, flattenedIndex) {\n    var _a;\n    var dividerProps = {\n      group: group,\n      groupIndex: flattenedIndex,\n      groupLevel: (_a = group.level) !== null && _a !== void 0 ? _a : 0,\n      viewport: viewport,\n      selectionMode: selectionMode,\n      groups: groups,\n      compact: compact,\n      onToggleSelectGroup: onToggleSelectGroup,\n      onToggleCollapse: onToggleCollapse,\n      onToggleSummarize: onToggleSummarize\n    };\n    return dividerProps;\n  };\n  var renderHeader = function (item, flattenedIndex) {\n    var group = item.group;\n    var ariaProps;\n    if (role === 'treegrid') {\n      // GroupedList default role\n      ariaProps = {\n        ariaLevel: group.level ? group.level + 1 : 1,\n        ariaSetSize: groups ? groups.length : undefined,\n        ariaPosInSet: item.groupIndex\n      };\n    } else {\n      // Grouped DetailsList\n      ariaProps = {\n        ariaRowIndex: flattenedIndex\n      };\n    }\n    var headerProps = __assign(__assign(__assign(__assign({}, groupProps.headerProps), getDividerProps(item.group, flattenedIndex)), {\n      key: group.key,\n      groupedListId: item.groupId\n    }), ariaProps);\n    return React.createElement(GroupItem, {\n      render: onRenderHeader,\n      defaultRender: renderGroupHeader,\n      item: item,\n      selection: selection,\n      eventGroup: events.current,\n      props: headerProps\n    });\n  };\n  var renderShowAll = function (item, flattenedIndex) {\n    var group = item.group;\n    var groupShowAllProps = __assign(__assign(__assign({}, groupProps.showAllProps), getDividerProps(group, flattenedIndex)), {\n      key: group.key ? \"\".concat(group.key, \"-show-all\") : undefined\n    });\n    return onRenderShowAll(groupShowAllProps, renderGroupShowAll);\n  };\n  var renderFooter = function (item, flattenedIndex) {\n    var group = item.group;\n    var groupFooterProps = __assign(__assign(__assign({}, groupProps.footerProps), getDividerProps(group, flattenedIndex)), {\n      key: group.key ? \"\".concat(group.key, \"-footer\") : undefined\n    });\n    return onRenderFooter(groupFooterProps, renderGroupFooter);\n  };\n  var renderItem = function (item, flattenedIndex) {\n    var _a;\n    if (item.type === 'header') {\n      return renderHeader(item, flattenedIndex);\n    } else if (item.type === 'showAll') {\n      return renderShowAll(item, flattenedIndex);\n    } else if (item.type === 'footer') {\n      return renderFooter(item, flattenedIndex);\n    } else {\n      var level = item.group.level ? item.group.level + 1 : 1;\n      return onRenderCell(level, item.item, (_a = item.itemIndex) !== null && _a !== void 0 ? _a : flattenedIndex, item.group);\n    }\n  };\n  return React.createElement(FocusZone, __assign({\n    direction: FocusZoneDirection.vertical,\n    \"data-automationid\": \"GroupedList\",\n    \"data-is-scrollable\": \"false\",\n    role: \"presentation\"\n  }, focusZoneProps, {\n    shouldEnterInnerZone: shouldEnterInnerZone,\n    className: css(classNames.root, focusZoneProps.className)\n  }), React.createElement(List, __assign({\n    ref: listRef,\n    role: role,\n    items: listView,\n    // eslint-disable-next-line\n    onRenderCellConditional: renderItem,\n    usePageCache: usePageCache,\n    onShouldVirtualize: onShouldVirtualize,\n    getPageSpecification: getPageSpecification,\n    version: version,\n    getKey: getKey\n  }, listProps, rootListProps)));\n};\nvar GroupItem = function (_a) {\n  var render = _a.render,\n    defaultRender = _a.defaultRender,\n    item = _a.item,\n    selection = _a.selection,\n    eventGroup = _a.eventGroup,\n    props = _a.props;\n  var group = item.group;\n  var isSelected = useIsGroupSelected(group.startIndex, group.count, selection, eventGroup);\n  var mergedProps = __assign(__assign({}, props), {\n    isSelected: isSelected,\n    selected: isSelected\n  });\n  return render(mergedProps, defaultRender);\n};\nvar GroupedListV2Wrapper = /** @class */function (_super) {\n  __extends(GroupedListV2Wrapper, _super);\n  function GroupedListV2Wrapper(props) {\n    var _this = _super.call(this, props) || this;\n    _this._groupedList = React.createRef();\n    initializeComponentRef(_this);\n    var _a = props.listProps,\n      _b = _a === void 0 ? {} : _a,\n      _c = _b.version,\n      version = _c === void 0 ? {} : _c,\n      groups = props.groups;\n    _this.state = {\n      version: version,\n      groupExpandedVersion: {},\n      groups: groups\n    };\n    return _this;\n  }\n  GroupedListV2Wrapper.getDerivedStateFromProps = function (nextProps, previousState) {\n    var groups = nextProps.groups,\n      selectionMode = nextProps.selectionMode,\n      compact = nextProps.compact,\n      items = nextProps.items,\n      listProps = nextProps.listProps;\n    var nextListVersion = listProps && listProps.version;\n    var nextState = __assign(__assign({}, previousState), {\n      groups: groups\n    });\n    if (nextListVersion !== previousState.version || items !== previousState.items || groups !== previousState.groups || selectionMode !== previousState.selectionMode || compact !== previousState.compact) {\n      nextState.version = {};\n    }\n    return nextState;\n  };\n  GroupedListV2Wrapper.prototype.scrollToIndex = function (index, measureItem, scrollToMode) {\n    var _a;\n    (_a = this._groupedList.current) === null || _a === void 0 ? void 0 : _a.scrollToIndex(index, measureItem, scrollToMode);\n  };\n  GroupedListV2Wrapper.prototype.getStartItemIndexInView = function () {\n    var _a;\n    return ((_a = this._groupedList.current) === null || _a === void 0 ? void 0 : _a.getStartItemIndexInView()) || 0;\n  };\n  GroupedListV2Wrapper.prototype.render = function () {\n    return React.createElement(GroupedListV2FC, __assign({}, this.props, this.state, {\n      groupedListRef: this._groupedList\n    }));\n  };\n  GroupedListV2Wrapper.prototype.forceUpdate = function () {\n    _super.prototype.forceUpdate.call(this);\n    this._forceListUpdate();\n  };\n  GroupedListV2Wrapper.prototype.toggleCollapseAll = function (allCollapsed) {\n    var _a;\n    var groups = this.state.groups;\n    var groupProps = this.props.groupProps;\n    if (groups && groups.length > 0) {\n      (_a = groupProps === null || groupProps === void 0 ? void 0 : groupProps.onToggleCollapseAll) === null || _a === void 0 ? void 0 : _a.call(groupProps, allCollapsed);\n      setGroupsCollapsedState(groups, allCollapsed);\n      this.setState({\n        groupExpandedVersion: {}\n      });\n      this.forceUpdate();\n    }\n  };\n  GroupedListV2Wrapper.prototype._forceListUpdate = function () {\n    this.setState({\n      version: {}\n    });\n  };\n  GroupedListV2Wrapper.displayName = 'GroupedListV2';\n  return GroupedListV2Wrapper;\n}(React.Component);\nexport { GroupedListV2Wrapper };","map":{"version":3,"names":["_this","React","initializeComponentRef","classNamesFunction","KeyCodes","getRTLSafeKeyCode","css","getId","EventGroup","List","SelectionMode","SELECTION_CHANGE","FocusZone","FocusZoneDirection","GroupHeader","GroupShowAll","GroupFooter","flattenItems","groups","items","memoItems","getGroupItemLimit","length","Array","index","stack","j","push","group","groupIndex","_a","pop","groupId","type","isCollapsed","children","itemIndex","startIndex","renderCount","Infinity","count","isShowingAll","itemEnd","Math","min","item","isShowAllVisible","hasMoreData","useIsGroupSelected","selection","eventGroup","useState","isRangeSelected","isSelected","setIsSelected","useEffect","changeHandler_1","on","off","computeIsSomeGroupExpanded","some","setGroupsCollapsedState","undefined","isInnerZoneKeystroke","ev","which","right","getClassNames","getKey","_index","_b","key","concat","renderGroupHeader","props","createElement","__assign","renderGroupShowAll","renderGroupFooter","footerText","GroupedListV2FC","selectionMode","multiple","groupProps","_c","compact","_d","onGroupExpandStateChanged","listProps","className","usePageCache","onShouldVirtualize","theme","_e","role","styles","_f","focusZoneProps","_g","rootListProps","onRenderCell","viewport","groupedListRef","groupExpandedVersion","versionFromProps","version","_h","onRenderHeader","_j","onRenderFooter","_k","onRenderShowAll","classNames","events","useRef","flatList","isSomeGroupExpanded","listRef","_l","setVersion","_m","toggleVersion","setToggleVersion","_o","shouldEnterInnerZone","listView","useMemo","current","getPageSpecification","useCallback","flattenedIndex","pageGroup","useImperativeHandle","indexMap","scrollToIndex","measureItem","scrollToMode","reduce","map","listIndex","scrollIndex","measure","getStartItemIndexInView","isAllGroupsCollapsed","dispose","newIsSomeGroupExpanded","onToggleCollapse","onToggleCollapseFn","headerProps","onToggleSelectGroup","toggleRangeSelected","onToggleSummarize","onToggleSummarizeFn","showAllProps","getDividerProps","dividerProps","groupLevel","level","renderHeader","ariaProps","ariaLevel","ariaSetSize","ariaPosInSet","ariaRowIndex","groupedListId","GroupItem","render","defaultRender","renderShowAll","groupShowAllProps","renderFooter","groupFooterProps","footerProps","renderItem","direction","vertical","root","ref","onRenderCellConditional","mergedProps","selected","GroupedListV2Wrapper","_super","__extends","call","_groupedList","createRef","state","getDerivedStateFromProps","nextProps","previousState","nextListVersion","nextState","prototype","forceUpdate","_forceListUpdate","toggleCollapseAll","allCollapsed","onToggleCollapseAll","setState","displayName","Component"],"sources":["C:\\Users\\sahan\\Documents\\Projects\\indian-cuisine-frontend\\node_modules\\@fluentui\\react\\lib\\components\\src\\components\\GroupedList\\GroupedListV2.base.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  initializeComponentRef,\n  classNamesFunction,\n  KeyCodes,\n  getRTLSafeKeyCode,\n  css,\n  getId,\n  EventGroup,\n  IRenderFunction,\n} from '../../Utilities';\nimport { List, ScrollToMode, IListProps } from '../../List';\nimport { ISelection, SelectionMode, SELECTION_CHANGE } from '../../Selection';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport type { IProcessedStyleSet } from '../../Styling';\nimport type {\n  IGroupedList,\n  IGroup,\n  IGroupRenderProps,\n  IGroupedListStyleProps,\n  IGroupedListStyles,\n} from './GroupedList.types';\nimport type {\n  IGroupedListV2,\n  IGroupedListV2Props,\n  IItemGroupedItem,\n  IShowAllGroupedItem,\n  IFooterGroupedItem,\n  IHeaderGroupedItem,\n  IGroupedItem,\n} from './GroupedListV2.types';\nimport { GroupHeader } from './GroupHeader';\nimport { GroupShowAll } from './GroupShowAll';\nimport { GroupFooter } from './GroupFooter';\nimport type { IGroupHeaderProps } from './GroupHeader';\nimport type { IGroupShowAllProps } from './GroupShowAll.styles';\nimport type { IGroupFooterProps } from './GroupFooter.types';\n\nexport interface IGroupedListV2State {\n  selectionMode?: IGroupedListV2Props['selectionMode'];\n  compact?: IGroupedListV2Props['compact'];\n  groups?: IGroup[];\n  items?: IGroupedListV2Props['items'];\n  listProps?: IGroupedListV2Props['listProps'];\n  version: {};\n  groupExpandedVersion: {};\n}\n\ntype FlattenItems = (\n  groups: IGroup[] | undefined,\n  items: any[],\n  memoItems: IGroupedItem[],\n  groupProps: IGroupRenderProps['getGroupItemLimit'],\n) => IGroupedItem[];\n\ntype GroupStackItem = {\n  group: IGroup;\n  groupIndex: number;\n};\n\nconst flattenItems: FlattenItems = (groups, items, memoItems, getGroupItemLimit) => {\n  if (!groups) {\n    return items;\n  }\n\n  if (memoItems.length < 1) {\n    // Not the exact final size but gets us in the ballpark.\n    // This helps avoid trashing memory when building\n    // the flattened list.\n    memoItems = new Array(items.length);\n  }\n\n  let index = 0;\n\n  const stack: GroupStackItem[] = [];\n  let j = groups.length - 1;\n  while (j >= 0) {\n    stack.push({ group: groups[j], groupIndex: j + 1 });\n    j--;\n  }\n\n  while (stack.length > 0) {\n    // eslint-disable-next-line prefer-const\n    let { group, groupIndex } = stack.pop()!;\n    memoItems[index] = {\n      group,\n      groupId: getId('GroupedListSection'),\n      type: 'header',\n      groupIndex,\n    };\n\n    index++;\n\n    while (group.isCollapsed !== true && group?.children && group.children.length > 0) {\n      j = group.children.length - 1;\n      while (j > 0) {\n        stack.push({ group: group.children[j], groupIndex: j + 1 });\n        j--;\n      }\n      group = group.children[0];\n      memoItems[index] = {\n        group,\n        groupId: getId('GroupedListSection'),\n        type: 'header',\n        groupIndex: 1,\n      };\n      index++;\n    }\n\n    if (group.isCollapsed !== true) {\n      let itemIndex = group.startIndex;\n      const renderCount = getGroupItemLimit ? getGroupItemLimit(group) : Infinity;\n      const count = !group.isShowingAll ? group.count : items.length;\n      const itemEnd = itemIndex + Math.min(count, renderCount);\n      while (itemIndex < itemEnd) {\n        memoItems[index] = {\n          group,\n          item: items[itemIndex],\n          itemIndex, // track the index in `item` for later rendering/selection\n          type: 'item',\n        };\n        itemIndex++;\n        index++;\n      }\n\n      const isShowAllVisible =\n        !group.children &&\n        !group.isCollapsed &&\n        !group.isShowingAll &&\n        (group.count > renderCount || group.hasMoreData);\n\n      if (isShowAllVisible) {\n        memoItems[index] = {\n          group,\n          type: 'showAll',\n        };\n        index++;\n      }\n    }\n\n    // Placeholder for a potential footer.\n    // Whether or not a footer is displayed is resolved\n    // by the footer render function so this is just a marker\n    // for where a footer may go.\n    memoItems[index] = {\n      group,\n      type: 'footer',\n    };\n    index++;\n  }\n\n  memoItems.length = index;\n\n  // console.log('MEMO ITEMS', memoItems);\n\n  return memoItems;\n};\n\ntype UseIsGroupSelected = (\n  startIndex: number,\n  count: number,\n  selection?: ISelection,\n  eventGroup?: EventGroup,\n) => boolean;\n\nconst useIsGroupSelected: UseIsGroupSelected = (startIndex, count, selection, eventGroup) => {\n  const [isSelected, setIsSelected] = React.useState(() => selection?.isRangeSelected(startIndex, count) ?? false);\n\n  React.useEffect(() => {\n    if (selection && eventGroup) {\n      const changeHandler = () => {\n        setIsSelected(selection?.isRangeSelected(startIndex, count) ?? false);\n      };\n\n      eventGroup.on(selection, SELECTION_CHANGE, changeHandler);\n\n      return () => {\n        eventGroup?.off(selection, SELECTION_CHANGE, changeHandler);\n      };\n    }\n  }, [startIndex, count, selection, eventGroup]);\n\n  return isSelected;\n};\n\nconst computeIsSomeGroupExpanded = (groups: IGroup[] | undefined): boolean => {\n  return !!(\n    groups && groups.some(group => (group.children ? computeIsSomeGroupExpanded(group.children) : !group.isCollapsed))\n  );\n};\n\nconst setGroupsCollapsedState = (groups: IGroup[] | undefined, isCollapsed: boolean): void => {\n  if (groups === undefined) {\n    return;\n  }\n  for (let groupIndex = 0; groupIndex < groups.length; groupIndex++) {\n    groups[groupIndex].isCollapsed = isCollapsed;\n  }\n};\n\nconst isInnerZoneKeystroke = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n  // eslint-disable-next-line deprecation/deprecation\n  return ev.which === getRTLSafeKeyCode(KeyCodes.right);\n};\n\nconst getClassNames = classNamesFunction<IGroupedListStyleProps, IGroupedListStyles>();\n\nconst getKey: IListProps['getKey'] = (item, _index) => {\n  switch (item.type) {\n    case 'item':\n      return item.item?.key ?? null;\n\n    case 'header':\n      return item.group.key;\n\n    case 'footer':\n      return `${item.group.key}-footer`;\n\n    case 'showAll':\n      return `${item.group.key}-showAll`;\n  }\n\n  return null;\n};\n\nconst renderGroupHeader = (props: IGroupHeaderProps): JSX.Element => {\n  return <GroupHeader {...props} />;\n};\n\nconst renderGroupShowAll = (props: IGroupShowAllProps): JSX.Element => {\n  return <GroupShowAll {...props} />;\n};\n\nconst renderGroupFooter = (props: IGroupFooterProps): JSX.Element | null => {\n  if (props.group && props.footerText) {\n    return <GroupFooter {...props} />;\n  }\n\n  return null;\n};\n\nexport const GroupedListV2FC: React.FC<IGroupedListV2Props> = props => {\n  const {\n    selection,\n    selectionMode = SelectionMode.multiple,\n    groupProps = {},\n    compact = false,\n    items = [],\n    groups,\n    onGroupExpandStateChanged,\n\n    listProps,\n    className,\n    usePageCache,\n    onShouldVirtualize,\n    theme,\n    role = 'treegrid',\n    styles,\n    focusZoneProps = {},\n    rootListProps = {},\n    onRenderCell,\n    viewport,\n    groupedListRef,\n    groupExpandedVersion,\n    version: versionFromProps,\n  } = props;\n\n  const {\n    onRenderHeader = renderGroupHeader,\n    onRenderFooter = renderGroupFooter,\n    onRenderShowAll = renderGroupShowAll,\n  } = groupProps;\n\n  const classNames: IProcessedStyleSet<IGroupedListStyles> = getClassNames(styles, {\n    theme: theme!,\n    className,\n    compact,\n  });\n\n  const events = React.useRef<EventGroup>();\n  const flatList = React.useRef<IGroupedItem[]>([]);\n  const isSomeGroupExpanded = React.useRef<boolean>(computeIsSomeGroupExpanded(groups));\n  const listRef = React.useRef<List>(null);\n\n  const [version, setVersion] = React.useState({});\n  const [toggleVersion, setToggleVersion] = React.useState({});\n\n  // eslint-disable-next-line deprecation/deprecation\n  const { shouldEnterInnerZone = isInnerZoneKeystroke } = focusZoneProps;\n\n  const listView = React.useMemo(() => {\n    return flattenItems(groups, items, flatList.current, groupProps?.getGroupItemLimit);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [groups, groupProps?.getGroupItemLimit, items, toggleVersion, flatList, groupExpandedVersion]);\n\n  const getPageSpecification = React.useCallback(\n    (flattenedIndex: number): { key?: string } => {\n      const pageGroup = listView[flattenedIndex];\n      return {\n        key: pageGroup.type === 'header' ? pageGroup.group.key : undefined,\n      };\n    },\n    [listView],\n  );\n\n  React.useImperativeHandle(\n    groupedListRef,\n    () => {\n      let indexMap: number[] | undefined;\n\n      return {\n        scrollToIndex: (\n          index: number,\n          measureItem?: (itemIndex: number) => number,\n          scrollToMode?: ScrollToMode,\n        ): void => {\n          indexMap =\n            indexMap ??\n            listView.reduce((map, item, listIndex) => {\n              if (item.type === 'item') {\n                map[item.itemIndex] = listIndex;\n              }\n              return map;\n            }, [] as number[]);\n\n          const scrollIndex = indexMap[index];\n          const measure =\n            typeof measureItem === 'function'\n              ? (itemIndex: number): number => {\n                  if (listView[itemIndex]?.type === 'item') {\n                    return measureItem((listView[itemIndex] as IItemGroupedItem).itemIndex);\n                  }\n\n                  return 0;\n                }\n              : undefined;\n\n          listRef.current?.scrollToIndex(scrollIndex, measure, scrollToMode);\n        },\n\n        getStartItemIndexInView: (): number => {\n          return listRef.current?.getStartItemIndexInView() || 0;\n        },\n      };\n    },\n    [listView, listRef],\n  );\n\n  React.useEffect(() => {\n    if (groupProps?.isAllGroupsCollapsed) {\n      setGroupsCollapsedState(groups, groupProps.isAllGroupsCollapsed);\n    }\n    events.current = new EventGroup(this);\n\n    return () => {\n      events.current?.dispose();\n      events.current = undefined;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  React.useEffect(() => {\n    setVersion({});\n  }, [versionFromProps]);\n\n  React.useEffect(() => {\n    const newIsSomeGroupExpanded = computeIsSomeGroupExpanded(groups);\n    if (newIsSomeGroupExpanded !== isSomeGroupExpanded.current) {\n      isSomeGroupExpanded.current = newIsSomeGroupExpanded;\n      onGroupExpandStateChanged?.(newIsSomeGroupExpanded);\n    }\n  }, [groups, toggleVersion, onGroupExpandStateChanged, groupExpandedVersion]);\n\n  const onToggleCollapse = React.useCallback(\n    (group: IGroup): void => {\n      const onToggleCollapseFn = groupProps?.headerProps?.onToggleCollapse;\n\n      if (group) {\n        onToggleCollapseFn?.(group);\n        group.isCollapsed = !group.isCollapsed;\n        setToggleVersion({});\n        setVersion({});\n      }\n    },\n    [setToggleVersion, groupProps],\n  );\n\n  const onToggleSelectGroup = (group: IGroup): void => {\n    if (group && selection && selectionMode === SelectionMode.multiple) {\n      selection.toggleRangeSelected(group.startIndex, group.count);\n    }\n  };\n\n  const onToggleSummarize = (group: IGroup): void => {\n    const onToggleSummarizeFn = groupProps?.showAllProps?.onToggleSummarize;\n\n    if (onToggleSummarizeFn) {\n      onToggleSummarizeFn(group);\n    } else {\n      if (group) {\n        group.isShowingAll = !group.isShowingAll;\n      }\n\n      setVersion({});\n      setToggleVersion({});\n    }\n  };\n\n  const getDividerProps = (group: IGroup, flattenedIndex: number) => {\n    const dividerProps = {\n      group,\n      groupIndex: flattenedIndex,\n      groupLevel: group.level ?? 0,\n      viewport,\n      selectionMode,\n      groups,\n      compact,\n      onToggleSelectGroup,\n      onToggleCollapse,\n      onToggleSummarize,\n    };\n\n    return dividerProps;\n  };\n\n  const renderHeader = (item: IHeaderGroupedItem, flattenedIndex: number): React.ReactNode => {\n    const group = item.group;\n\n    let ariaProps;\n    if (role === 'treegrid') {\n      // GroupedList default role\n      ariaProps = {\n        ariaLevel: group.level ? group.level + 1 : 1,\n        ariaSetSize: groups ? groups.length : undefined,\n        ariaPosInSet: item.groupIndex,\n      };\n    } else {\n      // Grouped DetailsList\n      ariaProps = {\n        ariaRowIndex: flattenedIndex,\n      };\n    }\n\n    const headerProps = {\n      ...groupProps!.headerProps,\n      ...getDividerProps(item.group, flattenedIndex),\n      key: group.key,\n      groupedListId: item.groupId,\n      ...ariaProps,\n    };\n\n    return (\n      <GroupItem\n        render={onRenderHeader}\n        defaultRender={renderGroupHeader}\n        item={item}\n        selection={selection}\n        eventGroup={events.current}\n        props={headerProps}\n      />\n    );\n  };\n\n  const renderShowAll = (item: IShowAllGroupedItem, flattenedIndex: number): React.ReactNode => {\n    const group = item.group;\n    const groupShowAllProps = {\n      ...groupProps!.showAllProps,\n      ...getDividerProps(group, flattenedIndex),\n      key: group.key ? `${group.key}-show-all` : undefined,\n    };\n\n    return onRenderShowAll(groupShowAllProps, renderGroupShowAll);\n  };\n\n  const renderFooter = (item: IFooterGroupedItem, flattenedIndex: number): React.ReactNode => {\n    const group = item.group;\n    const groupFooterProps = {\n      ...groupProps!.footerProps,\n      ...getDividerProps(group, flattenedIndex),\n      key: group.key ? `${group.key}-footer` : undefined,\n    };\n\n    return onRenderFooter(groupFooterProps, renderGroupFooter);\n  };\n\n  const renderItem = (item: IGroupedItem, flattenedIndex: number): React.ReactNode => {\n    if (item.type === 'header') {\n      return renderHeader(item, flattenedIndex);\n    } else if (item.type === 'showAll') {\n      return renderShowAll(item, flattenedIndex);\n    } else if (item.type === 'footer') {\n      return renderFooter(item, flattenedIndex);\n    } else {\n      const level = item.group.level ? item.group.level + 1 : 1;\n      return onRenderCell(level, item.item, item.itemIndex ?? flattenedIndex, item.group);\n    }\n  };\n\n  return (\n    <FocusZone\n      direction={FocusZoneDirection.vertical}\n      data-automationid=\"GroupedList\"\n      data-is-scrollable=\"false\"\n      role=\"presentation\"\n      {...focusZoneProps}\n      shouldEnterInnerZone={shouldEnterInnerZone}\n      className={css(classNames.root, focusZoneProps.className)}\n    >\n      <List\n        ref={listRef}\n        role={role}\n        items={listView}\n        // eslint-disable-next-line\n        onRenderCellConditional={renderItem}\n        usePageCache={usePageCache}\n        onShouldVirtualize={onShouldVirtualize}\n        getPageSpecification={getPageSpecification}\n        version={version}\n        getKey={getKey}\n        {...listProps}\n        {...rootListProps}\n      />\n    </FocusZone>\n  );\n};\n\ninterface IGroupItemProps<T> {\n  props: T;\n  render: IRenderFunction<T>;\n  defaultRender: (props?: T) => JSX.Element | null;\n  item: any;\n  selection?: ISelection;\n  eventGroup?: EventGroup;\n}\n\nconst GroupItem = <T,>({\n  render,\n  defaultRender,\n  item,\n  selection,\n  eventGroup,\n  props,\n}: React.PropsWithChildren<IGroupItemProps<T>>): React.ReactElement | null => {\n  const group = item.group;\n\n  const isSelected = useIsGroupSelected(group.startIndex, group.count, selection, eventGroup);\n  const mergedProps = {\n    ...props,\n    isSelected,\n    selected: isSelected,\n  };\n  return render(mergedProps, defaultRender);\n};\n\nexport class GroupedListV2Wrapper\n  extends React.Component<IGroupedListV2Props, IGroupedListV2State>\n  implements IGroupedList\n{\n  public static displayName: string = 'GroupedListV2';\n  private _groupedList = React.createRef<IGroupedListV2>();\n\n  public static getDerivedStateFromProps(\n    nextProps: IGroupedListV2Props,\n    previousState: IGroupedListV2State,\n  ): IGroupedListV2State {\n    const { groups, selectionMode, compact, items, listProps } = nextProps;\n    const nextListVersion = listProps && listProps.version;\n\n    const nextState = {\n      ...previousState,\n      groups,\n    };\n\n    if (\n      nextListVersion !== previousState.version ||\n      items !== previousState.items ||\n      groups !== previousState.groups ||\n      selectionMode !== previousState.selectionMode ||\n      compact !== previousState.compact\n    ) {\n      nextState.version = {};\n    }\n\n    return nextState;\n  }\n\n  constructor(props: IGroupedListV2Props) {\n    super(props);\n    initializeComponentRef(this);\n\n    const { listProps: { version = {} } = {}, groups } = props;\n    this.state = {\n      version,\n      groupExpandedVersion: {},\n      groups,\n    };\n  }\n\n  public scrollToIndex(index: number, measureItem?: (itemIndex: number) => number, scrollToMode?: ScrollToMode): void {\n    this._groupedList.current?.scrollToIndex(index, measureItem, scrollToMode);\n  }\n\n  public getStartItemIndexInView(): number {\n    return this._groupedList.current?.getStartItemIndexInView() || 0;\n  }\n\n  public render(): JSX.Element {\n    return <GroupedListV2FC {...this.props} {...this.state} groupedListRef={this._groupedList} />;\n  }\n\n  public forceUpdate() {\n    super.forceUpdate();\n    this._forceListUpdate();\n  }\n\n  public toggleCollapseAll(allCollapsed: boolean): void {\n    const { groups } = this.state;\n    const { groupProps } = this.props;\n\n    if (groups && groups.length > 0) {\n      groupProps?.onToggleCollapseAll?.(allCollapsed);\n\n      setGroupsCollapsedState(groups, allCollapsed);\n      this.setState({\n        groupExpandedVersion: {},\n      });\n\n      this.forceUpdate();\n    }\n  }\n\n  private _forceListUpdate(): void {\n    this.setState({\n      version: {},\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}